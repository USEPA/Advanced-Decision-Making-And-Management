{% extends "main/base.html" %}
{% load static %}


  {% block content %}


  <section id="main">
      <br/>
      <br/>

        <div class="card text-center" style="width:90%; left:5%; display: block" id='outline'>
          <div class="card-header">
            <h3>Support for ADAM</h3>
          </div>
          <div class="card-body">

            <div class="container" style="width:40%; left: 30%">
              <br/>
              <br/>

              <button class="btn btn-light btn-lg border btn-block" onclick="changecard('outline','model-0')">Model Types</button>
              <br/>
              <br/>
              <button class="btn btn-light btn-lg border btn-block" onclick="changecard('outline','data-0')">Data Structure</button>
              <br/>
              <br/>
              <button class="btn btn-light btn-lg border btn-block" onclick="changecard('outline','widgets-0')">Guide to Widgets</button>
              <br/>
              <br/>
              <button class="btn btn-light btn-lg border btn-block" onclick="changecard('outline','faq-0')">FAQ</button>
              <br/>
              <br/>

            </div>

          </div>
          <div class="card-footer text-muted">
            Outline
          </div>
        </div>


        <div class="card text-center" style="width:90%; left:5%; display: none" id='model-0'>
          <div class="card-header">
            <h3>Model Types</h3>
          </div>
          <div class="card-body">
            <h4 class="card-title">Currently we support 3 model types!</h4>
            <p class="card-text">

            </p>
            <button class="btn btn-light border" onclick="changecard('model-0','model-1')">Supply Chain Management</button>
            <br/>
            <br/>
            <button class="btn btn-light border" onclick="changecard('model-0','model-2')">Supply Chain Design</button>
            <br/>
            <br/>
            <button class="btn btn-light border" onclick="changecard('model-0','model-3')">Market Analysis</button>

          </div>
          <div class="card-footer text-muted">
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('model-0','outline')">Support Home</button>
          </div>
        </div>


        <div class="card text-center" style="width:90%; left:5%; display: none" id='model-1'>
          <div class="card-header">
            <h3>Model Types</h3>
          </div>
          <div class="card-body">
            <h4 class="card-title">Supply Chain Management</h4>
            <p class="card-text" style="text-align:left">
              Under the Supply Chain Management mode, an optimization problem will be solved to optimize pure economic objective without the allowance of new technology installations on arbitrary time interval basis, which depends on the time interval of data. Therefore, data regarding exisiting technologies must be provided. The objective function includes terms of supply cost, revenue of satisfying demand, transportation cost, and technology cost. The technology cost only includes the operational cost to process the raw material. The model currently only supports single transportation mode.
            </p>
            <p class="card-text" style="text-align:left">
              The results we provide in this mode will include: overall supply chain performance (overall cost and revenue as well as the breakdown), and information about logistics (product flows).
            </p>

          </div>
          <div class="card-footer text-muted">
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('model-1','outline')">Support Home</button>
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('model-1','model-2')">Supply Chain Design</button>
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('model-1','model-3')">Market Analysis</button>
          </div>
        </div>



        <div class="card text-center" style="width:90%; left:5%; display: none" id='model-2'>
          <div class="card-header">
            <h3>Model Types</h3>
          </div>
          <div class="card-body">
            <h4 class="card-title">Supply Chain Deisgn</h4>
            <p class="card-text" style="text-align:left">
              Under the Supply Chain Design mode, an optimization problem will be solved to optimize pure economic objective with the allowance of new technology installations on a yearly basis. Data regarding exisiting technologies is optional. The objective function includes terms of supply cost, revenue of satisfying demand, transportation cost, and technology cost. The technology cost includes annual operational cost to process raw materials as well we annualized investment.
            </p>
            <p class="card-text" style="text-align:left">
              The results we provide in this mode will include: overall supply chain performance (overall cost and revenue as well as the breakdown), information about technology installations, and information about logistics.
            </p>

          </div>
          <div class="card-footer text-muted">
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('model-2','outline')">Support Home</button>
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('model-2','model-1')">Supply Chain Management</button>
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('model-2','model-3')">Market Analysis</button>
          </div>
        </div>




        <div class="card text-center" style="width:90%; left:5%; display: none" id='model-3'>
          <div class="card-header">
            <h3>Model Types</h3>
          </div>
          <div class="card-body">
            <h4 class="card-title">Market Analysis</h4>
            <p class="card-text" style="text-align:left">
              Under the Market Analysis mode, an optimization problem will be solved to maximize the overall social welfare without the allowance of new technology installations. Data regarding exisiting technologies must be provided. The objective function includes terms of supply cost, revenue of satisfying demand, transportation cost, and technology cost. The technology cost only includes the operational cost to process the raw material. The model currently only supports single transportation mode.
            </p>
            <p class="card-text" style="text-align:left">
              The results we provide in this mode will include: overall supply chain performance (overall cost and revenue as well as the breakdown), information about clearing prices, and information about logistics.
            </p>

          </div>
          <div class="card-footer text-muted">
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('model-3','outline')">Support Home</button>
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('model-3','model-1')">Supply Chain Management</button>
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('model-3','model-2')">Supply Chain Design</button>
          </div>
        </div>


        <div class="card text-center" style="width:90%; left:5%; display: none" id='data-0'>
          <div class="card-header">
            <h3>Data Structure</h3>
          </div>
          <div class="card-body">
            <h4 class="card-title">Please Checkout structure of each kinds of data!</h4>
            <p class="card-text" style="text-align:left">
              To successfully solve your cases, different categories of data must be provided. All data files should be present as csv files. You can <strong>
              <a href="{% static '/expfile/data_templates/templates.zip' %}">download templates in a zip file</a></strong>
            </p>
            <button class="btn btn-light border" onclick="changecard('data-0','data-1')">Geographical Data</button>
            <br/>
            <br/>
            <button class="btn btn-light border" onclick="changecard('data-0','data-2')">Product and Transportation Data</button>
            <br/>
            <br/>
            <button class="btn btn-light border" onclick="changecard('data-0','data-3')">Technology Data</button>
            <br/>
            <br/>
            <button class="btn btn-light border" onclick="changecard('data-0','data-4')">Supply and Demand Data</button>


          </div>
          <div class="card-footer text-muted">
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('data-0','outline')">Support Home</button>
          </div>
        </div>



        <div class="card text-center" style="width:90%; left:5%; display: none" id='data-1'>
          <div class="card-header">
            <h3>Data Structure</h3>
          </div>
          <div class="card-body">
            <h4 class="card-title">Geographical Data</h4>
            <p class="card-text" style="text-align:left">
              For geographical data, users need to provide a list of all the nodes that will present in the network in a csv file. The form should have four columns: the first column is the node number; the second column defines the alia of the node where you can put node type here; the third and forth columns are the coordinate of the system (can either be latitude/longitude or just x-y coordinate). An example is given below.

            <table border="1" width=100%>
              <tr>
                <th># Nodes</th>
                <th>Alia</th>
                <th>Latitude</th>
                <th>Longitude</th>
              </tr>
              <tr>
                <td>n1</td>
                <td>Farm1</td>
                <td>43.2947</td>
                <td>-90.4921</td>
              </tr>
              <tr>
                <td>n2</td>
                <td>Farm2</td>
                <td>46.2143</td>
                <td>-89.2138</td>
              </tr>
              <tr>
                <td>...</td>
                <td>...</td>
                <td>...</td>
                <td>...</td>
              </tr>
              <tr>
                <td>n100</td>
                <td>Land50</td>
                <td>44.8432</td>
                <td>-91.2329</td>
              </tr>
            </table>

              </p>

              <p class="card-text" style="text-align:left">You can download a <strong><a href="{% static '/expfile/data_templates/template_geo_data.csv' %}">template</a></strong> for geographical data here. The geographical data structue is the same for any model type.</p>

              <p class="card-text" style="text-align:left">
                If user do not have geographical coordinates information available, one can also choose to ignore the last two columns (coordinates) in the above table and provide another file specifying the distance between each pair of nodes. This file is optional: if you have all the data for the distances between each pair of nodes, you can organize as follows; otherwise the tool will calculate the straight-line distance given the coordinates. An example is given below.

                <table border="1" width=100%>
                  <tr>
                    <th> # </th>
                    <th>n1</th>
                    <th>n2</th>
                    <th>...</th>
                    <th>n100</th>
                  </tr>
                  <tr>
                    <td>n1</td>
                    <td>0</td>
                    <td>100</td>
                    <td>...</td>
                    <td>240</td>
                  </tr>
                  <tr>
                    <td>n2</td>
                    <td>100</td>
                    <td>0</td>
                    <td>...</td>
                    <td>125</td>
                  </tr>
                  <tr>
                    <td>...</td>
                    <td>...</td>
                    <td>...</td>
                    <td>...</td>
                    <td>...</td>
                  </tr>
                  <tr>
                    <td>n100</td>
                    <td>240</td>
                    <td>125</td>
                    <td>...</td>
                    <td>0</td>
                  </tr>
                </table>
                </p>
              <p class="card-text" style="text-align:left">You can download a <strong><a href="{% static '/expfile/data_templates/template_dis_data.csv' %}">template</a></strong> for distance data here. Please note that the distance matrix should be symmetric (even though in reality this is often not the case). </p>


          </div>
          <div class="card-footer text-muted">
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('data-1','outline')">Support Home</button>
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('data-1','data-2')">Prod & Trans Data</button>
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('data-1','data-3')">Tech Data</button>
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('data-1','data-4')">Supply & Demand Data</button>
          </div>
        </div>




        <div class="card text-center" style="width:90%; left:5%; display: none" id='data-2'>
          <div class="card-header">
            <h3>Data Structure</h3>
          </div>
          <div class="card-body">
            <h4 class="card-title">Product and Transportation Data</h4>
            <p class="card-text" style="text-align:left">
              This is noted as ProdDocument in the data management system. You need to provide a list of all the materials (products) that will present in the network in this file. The form should have three columns: the first column is the product number; the second column defines the name of each product where you can put node type here; the third columns defines the transportation cost of each product in USD per unit of product per unit length of movement. For now pour models only support single transportation mode. An example is given below.

            <table border="1" width=100%>
              <tr>
                <th># Prod</th>
                <th>Name</th>
                <th>Trans cost</th>
              </tr>
              <tr>
                <td>p1</td>
                <td>cow manure</td>
                <td>2.9</td>
              </tr>
              <tr>
                <td>...</td>
                <td>...</td>
                <td>...</td>
              </tr>
              <tr>
                <td>p5</td>
                <td>Struvite</td>
                <td>1.0</td>
              </tr>
            </table>

              </p>

              <p class="card-text" style="text-align:left">You can download a <strong><a href="{% static '/expfile/data_templates/template_pro_data.csv' %}">template</a></strong> for product and transportation data here. The data structue is the same for any model type.</p>


          </div>
          <div class="card-footer text-muted">
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('data-2','outline')">Support Home</button>
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('data-2','data-1')">Geo Data</button>
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('data-2','data-3')">Tech Data</button>
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('data-2','data-4')">Supply & Demand Data</button>
          </div>
        </div>



        <div class="card text-center" style="width:90%; left:5%; display: none" id='data-3'>
          <div class="card-header">
            <h3>Data Structure</h3>
          </div>
          <div class="card-body">
            <h4 class="card-title">Technology Data</h4>
            <p class="card-text" style="text-align:left">
              Technology data should be provided in three separate csv files. The first one is noted as TechDocument in the data management system, where a list of all the technology that will present in the network as well as the corresponding techno-economic information in this file. This file should have eight columns: the first column is the technology number; the second and thir columns define the lower and upper bound of the technology capacity in per unit mass of reference product per unit of time; the forth column defines the reference product (the main raw material) of the technology; the fifth and sixth columns define the slope and intercept of the investment cost of the technology in USD; and the last two colums are the slope and intercept of the annual operational cost of the technology in USD per unit of time. Note that for each technology, a linearization of economic cost should be conducted prior to making the form. If for a specific technology, the cost function is highly nonlinear, we recommend to split the technology into several different ones with different capacity bounds. An example is given below.

            <table border="1" width=100%>
              <tr>
                <th># Tech</th>
                <th>Name</th>
                <th>Cap_min</th>
                <th>Cap_max</th>
                <th>Ref prod</th>
                <th>K_inv</th>
                <th>B_inv</th>
                <th>K_op</th>
                <th>B_op</th>
              </tr>
              <tr>
                <td>t1</td>
                <td>struvite for p1</td>
                <td>100</td>
                <td>1000</td>
                <td>p1</td>
                <td>100</td>
                <td>5000</td>
                <td>10</td>
                <td>500</td>
              </tr>
              <tr>
                <td>t2</td>
                <td>struvite for p2</td>
                <td>100</td>
                <td>1000</td>
                <td>p2</td>
                <td>200</td>
                <td>7000</td>
                <td>20</td>
                <td>700</td>
              </tr>
              <tr>
                <td>t3</td>
                <td>struvite for p1 large</td>
                <td>1000</td>
                <td>10000</td>
                <td>p1</td>
                <td>70</td>
                <td>3500</td>
                <td>7</td>
                <td>350</td>
              </tr>
            </table>

              </p>

              <p class="card-text" style="text-align:left">You can download a <strong><a href="{% static '/expfile/data_templates/template_tec_data.csv' %}">template</a></strong> here. The data structue is the same for any model type. Note that although for some model types investment will not be considered, you need to retain the corresponding columns.</p>

              <p class="card-text" style="text-align:left">The second file is noted as AlphaDocument in the data management system. In this file, you need to provide the conversion factors for all the technologies in a matrix form. The number of rows should be equal to the number of technologies and the number of columne should be equal to the number of products in this network. In each cell, you should enter the conversion factor of that product in the technology. For raw materials, the conversion factor should be negative; for generated products, it should be positive. If one material does not show up in the technology, the conversion factor should be zero. This form should not have any headings. An example is given below.

                <table border="1" width=100%>
                  <tr>
                    <td>-1</td>
                    <td>0</td>
                    <td>0.99</td>
                    <td>0</td>
                    <td>0.01</td>
                  </tr>
                  <tr>
                    <td>0</td>
                    <td>-1</td>
                    <td>0</td>
                    <td>0.97</td>
                    <td>0.03</td>
                  </tr>
                  <tr>
                    <td>-1</td>
                    <td>0</td>
                    <td>0.99</td>
                    <td>0</td>
                    <td>0.01</td>
                  </tr>
                </table>

              </p>
              <p class="card-text" style="text-align:left">You can download a <strong><a href="{% static '/expfile/data_templates/template_alp_data.csv' %}">template</a></strong> here. The data structue is the same for any model type.</p>

              <p class="card-text" style="text-align:left">The third file is noted as SiteDocument in the data management system. In this file, you need to provide a list of existing technology sites. Note that under logistic deisgn and Market Analysis model mode, this file is requried; while in Supply Chain Design mode, this file is optional (if you provide this file, the tool will detect new technology sites; if there is no installed technologies, you can either upload a empty list with heading only, or choose the option no pre-installed technology when specify the model data. This file should contain four columns: the first colum lists all existing technology sites; the second column defines its location by the node numbers; the third column defines the technology type by the technology numbers; and the forth column defines its maximum capacity in per unit mass of reference product per unit of time. An example is given below.

                <table border="1" width=100%>
                  <tr>
                    <th># P-Tech</th>
                    <th>Node</th>
                    <th>Tech</th>
                    <th>Cap</th>
                  </tr>
                  <tr>
                    <td>tp1</td>
                    <td>n1</td>
                    <td>t1</td>
                    <td>500</td>
                  </tr>
                  <tr>
                    <td>tp2</td>
                    <td>n8</td>
                    <td>t3</td>
                    <td>4000</td>
                  </tr>
                  <tr>
                    <td>...</td>
                    <td>...</td>
                    <td>...</td>
                    <td>...</td>
                  </tr>
                  <tr>
                    <td>tp5</td>
                    <td>n48</td>
                    <td>t2</td>
                    <td>800</td>
                  </tr>
                </table>

              </p>

                <p class="card-text" style="text-align:left">You can download a <strong><a href="{% static '/expfile/data_templates/template_sit_data.csv' %}">template</a></strong> here.</p>

          </div>
          <div class="card-footer text-muted">
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('data-3','outline')">Support Home</button>
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('data-3','data-1')">Geo Data</button>
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('data-3','data-2')">Prod & Trans Data</button>
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('data-3','data-4')">Supply & Demand Data</button>
          </div>
        </div>




        <div class="card text-center" style="width:90%; left:5%; display: none" id='data-4'>
          <div class="card-header">
            <h3>Data Structure</h3>
          </div>
          <div class="card-body">
            <h4 class="card-title">Supply and Demand Data</h4>
            <p class="card-text" style="text-align:left">
              This is noted as SupDocument in the data management system. You need to provide a list of all the supply sources in this file. The form should have five columns: the first column is the supply source number; the second column defines the supply node where the product is coming from; the third column define the product type of that supply; the forth column defines the price of that supply in USD per unit if in Supply Chain Management or supply chain mode, or the bids of that supply in USD per unit if in Market Analysis mode; and the fifth column defines the supply amount (if in Supply Chain Management or Supply Chain Design mode) or supply capacity (if in Market Analysis mode) in per unit mass of product per unit of time. An example is given below.

            <table border="1" width=100%>
              <tr>
                <th># Supply</th>
                <th>Node</th>
                <th>Product</th>
                <th>Price/Bids</th>
                <th>Amount/Capacity</th>
              </tr>
              <tr>
                <td>s1</td>
                <td>n1</td>
                <td>p1</td>
                <td>-1.8</td>
                <td>3000</td>
              </tr>
              <tr>
                <td>s2</td>
                <td>n10</td>
                <td>p2</td>
                <td>-2.5</td>
                <td>5000</td>
              </tr>
              <tr>
                <td>...</td>
                <td>...</td>
                <td>...</td>
                <td>...</td>
                <td>...</td>
              </tr>
              <tr>
                <td>s30</td>
                <td>n40</td>
                <td>p1</td>
                <td>-1.65</td>
                <td>7000</td>
              </tr>
            </table>

              </p>

              <p class="card-text" style="text-align:left">You can download a <strong><a href="{% static '/expfile/data_templates/template_sup_data.csv' %}">template</a></strong> for supply data here. Please note that although the structure is the same for different model types, the physical meaning of the forth and fifth column can be different.</p>

              <p class="card-text" style="text-align:left">
                This is noted as DemDocument in the data management system. You need to provide a list of all the possible demand in this file. The structure of this form is similar to the similar data and should have five columns: the first column is the demand number; the second column defines the demand node where the product is sold; the third column define the product type of that demand; the forth column defines the price of that demand in USD per unit if in Supply Chain Management or supply chain mode, or the bids of that demand in USD per unit if in Market Analysis mode; and the fifth column defines the demand capacity in per unit mass of product per unit of time. An example is given below.

              <table border="1" width=100%>
                <tr>
                  <th># Demand</th>
                  <th>Node</th>
                  <th>Product</th>
                  <th>Price/Bids</th>
                  <th>Capacity</th>
                </tr>
                <tr>
                  <td>d1</td>
                  <td>n49</td>
                  <td>p3</td>
                  <td>0.3</td>
                  <td>3000</td>
                </tr>
                <tr>
                  <td>d2</td>
                  <td>n49</td>
                  <td>p4</td>
                  <td>0.4</td>
                  <td>3000</td>
                </tr>
                <tr>
                  <td>...</td>
                  <td>...</td>
                  <td>...</td>
                  <td>...</td>
                  <td>...</td>
                </tr>
                <tr>
                  <td>d30</td>
                  <td>n50</td>
                  <td>p5</td>
                  <td>1000</td>
                  <td>1e10</td>
                </tr>
              </table>

                </p>

                <p class="card-text" style="text-align:left">You can download a <strong><a href="{% static '/expfile/data_templates/template_dem_data.csv' %}">template</a></strong> for demand data here. Please be careful that: all the possible final products should have a corresponding customer; if one demand stream does not has a capacity, you can specify capacity to a large number (e.g. the total amount of supply). The demand data structure is the same for different model types. </p>




          </div>
          <div class="card-footer text-muted">
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('data-4','outline')">Support Home</button>
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('data-4','data-1')">Geo Data</button>
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('data-4','data-2')">Prod & Trans Data</button>
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('data-4','data-3')">Tech Data</button>
          </div>
        </div>


        <div class="card text-center" style="width:90%; left:5%; display: none" id='widgets-0'>
          <div class="card-header">
            <h3>Guide to Widgets</h3>
          </div>
          <div class="card-body">
            <h4 class="card-title">Content</h4>
            <p class="card-text" style="text-align:left">
              We provided several widgets to help users define and check their data.

              <strong> Data Check Widget</strong>
            </p>


          </div>
          <div class="card-footer text-muted">
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('widgets-0','outline')">Support Home</button>

          </div>
        </div>




        <div class="card text-center" style="width:90%; left:5%; display: none" id='faq-0'>
          <div class="card-header">
            <h3>FAQ</h3>
          </div>
          <div class="card-body">
            <h4 class="card-title">Content</h4>
            <p class="card-text" style="text-align:left">
            Not Ready.
            </p>


          </div>
          <div class="card-footer text-muted">
            <button class="text-muted" style="border:none; background-color:rgba(0, 0, 0, 0);" onclick="changecard('faq-0','outline')">Support Home</button>

          </div>
        </div>



    <br/>
    <br/>

  {% endblock content %}


{% block scripts %}
  <script>
    function changecard(id1,id2){
      $("#"+id1).fadeTo(300,0, function(){
        $("#"+id1).css("display","none");
        $("#"+id2).fadeTo(300,1);
      });
    }
  </script>
{% endblock scripts %}
